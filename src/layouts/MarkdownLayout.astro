---
import Layout from "./Layout.astro";
import Tag from "../components/tag.astro";

// Frontmatter properties
import type { MarkdownLayoutProps } from "astro";

type Props = MarkdownLayoutProps<{
    title: string;
    pubDate: string | undefined;
    description: string | undefined;
    image: { url: string; alt: string } | undefined;
    tags: string[] | undefined;
}>;

const { frontmatter } = Astro.props;

const date = new Date(frontmatter.pubDate ?? "").toDateString();
const tags = [...(frontmatter.tags ?? [])];
---

<Layout title="Blog" description={frontmatter.description ?? ""}>
    <article>
        <h1>{frontmatter.title}</h1>
        {
            tags.length > 0 && (
                <ul class="tag-list">
                    {tags.map((tag) => (
                        <li>
                            <Tag {tag} />
                        </li>
                    ))}
                </ul>
            )
        }
        <p>Published: {date}</p>
        {
            frontmatter.description !== undefined && (
                <p>
                    <em>{frontmatter.description}</em>
                </p>
            )
        }
        {
            frontmatter.image !== undefined && (
                <img
                    src={frontmatter.image.url}
                    width="300"
                    alt={frontmatter.image.alt}
                />
            )
        }
        <hr />
        <slot />
    </article>
</Layout>

<style>
    .tag-list {
        display: flex;
        padding: 0;
        margin: 0;
        gap: 0.5ch;
    }
    .tag-list > li {
        display: contents;
    }
</style>
